<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <title>PingPong</title>
  <link rel="stylesheet" href="./css/master.css">
  <!-- <script src="pong.js" type="text/javascript"></script> -->
</head>

<body>
  <div id="left" style="top: 0px; left: 0px;"></div>
  <div id="ball">
    <!-- <div id="inner">

    </div> -->
  </div>
  <div id="right" style="top: 0; left: 98vw;"></div>

  <script type="text/javascript">
    var width = document.body.clientWidth;
    var height = document.body.clientHeight;
    // var radius = 25;
    var ball = document.getElementById('ball');
    var left = document.getElementById('left');
    var right = document.getElementById('right');
    var checkpaddle;
    var x = width / 2;
    var y = height / 2;
    console.log(x, y);
    var xspeed = 2;
    var yspeed = 1;
    ball.style.top = '0px';
    ball.style.left = '0px';
    console.log(width);
    ball.style.top = x + 'px';
    ball.style.left = y + 'px';
    console.log(ball.style.top);
    var number = setInterval(function update() {
      x = x + xspeed;
      y = y + yspeed;
      ball.style.top = y + 'px';
      ball.style.left = x + 'px';
      if (y < 0 || y + 90 > height) {
        yspeed = -1 * yspeed;
      }
      if (Math.abs(x) < 25 || Math.abs(x) > width - 25) {
        x = width / 2;
      }
    }, 1);
    document.body.addEventListener('keydown', function(event) {
      if (event.key == 'ArrowDown') {
        if (parseFloat(right.style.top.slice(0, -2)) < height - 200) {
          right.style.top = (parseFloat(right.style.top.slice(0, -2)) + 60) + 'px';
        }
      }
      if (event.key == 'ArrowUp') {
        if (parseFloat(right.style.top.slice(0, -2)) > 0) {
          right.style.top = (parseFloat(right.style.top.slice(0, -2)) - 60) + 'px';
        }
      }
      if (event.key == 'w') {
        if (parseFloat(left.style.top.slice(0, -2)) > 0) {
          left.style.top = (parseFloat(left.style.top.slice(0, -2)) - 60) + 'px';
        }
      }
      if (event.key == 's') {
        if (parseFloat(left.style.top.slice(0, -2)) < height - 200) {
          left.style.top = (parseFloat(left.style.top.slice(0, -2)) + 60) + 'px';
        }
      }
    });
    // if(checkpaddle != null){
    //   clearInterval(checkpaddle);
    // }
    checkpaddle = setInterval(function check() {
      var balltop = parseFloat(ball.style.top.slice(0, -2));
      var ballleft = parseFloat(ball.style.left.slice(0, -2));
      var righttop = parseFloat(right.style.top.slice(0, -2));
      var lefttop = parseFloat(left.style.top.slice(0, -2));
      var rightleft = parseFloat(right.style.left.slice(0, -2));
      var leftleft = parseFloat(left.style.left.slice(0, -2));
      console.log(leftleft);
      if ((balltop >= righttop) && (balltop + 120 <=righttop + 210) && (ballleft + 100 > width - 30)) {
        console.log(balltop > righttop,balltop , righttop,height - balltop + 100 < height - righttop + 150,height - balltop + 100 , height - righttop + 150);
        xspeed = -1 * xspeed;
      }
      if ((balltop >= lefttop) && (balltop + 120 <=lefttop + 210) && (ballleft <=30)) {
        //console.log(balltop,righttop,ballleft,rightleft);
        xspeed = -1 * xspeed;
      }
    }, 1);
  </script>
</body>

</html>
